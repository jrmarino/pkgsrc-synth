$NetBSD: patch-CVE-2018-7549,v 1.1 2018/03/30 20:56:42 spz Exp $

fix for CVE-2018-7549 from
https://sourceforge.net/p/zsh/code/ci/c2cc8b0fbefc9868fa83537f5b6d90fc1ec438dd

--- Src/params.c.orig	2017-06-11 19:34:06.000000000 +0000
+++ Src/params.c	2018-03-30 19:57:36.000000000 +0000
@@ -535,10 +535,13 @@
 HashTable
 copyparamtable(HashTable ht, char *name)
 {
-    HashTable nht = newparamtable(ht->hsize, name);
-    outtable = nht;
-    scanhashtable(ht, 0, 0, 0, scancopyparams, 0);
-    outtable = NULL;
+    HashTable nht = 0;
+    if (ht) {
+        nht = newparamtable(ht->hsize, name);
+        outtable = nht;
+        scanhashtable(ht, 0, 0, 0, scancopyparams, 0);
+        outtable = NULL;
+    }
     return nht;
 }
 
