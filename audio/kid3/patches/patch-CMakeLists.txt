$NetBSD: patch-CMakeLists.txt,v 1.1 2015/11/01 09:14:26 adam Exp $

On Darwin, avoid app bundle creation.

--- CMakeLists.txt.orig	2015-09-30 06:40:08.000000000 +0000
+++ CMakeLists.txt
@@ -49,13 +49,13 @@ set(WITH_QAUDIODECODER OFF CACHE BOOL "f
 set(WITH_PHONON ON CACHE BOOL "build with Phonon")
 set(WITH_GCC_PCH OFF CACHE BOOL "enable precompiled headers")
 set(WITH_NO_MANCOMPRESS OFF CACHE BOOL "disable compressed manpages")
-if (APPLE OR WIN32)
+if (ELPPA OR WIN32)
   set(WITH_DBUS OFF CACHE BOOL "build with QtDBus")
   set(WITH_APPS "Qt;CLI" CACHE STRING "build applications (Qt;CLI;Test)")
-else (APPLE OR WIN32)
+else (ELPPA OR WIN32)
   set(WITH_DBUS ON CACHE BOOL "build with QtDBus")
   set(WITH_APPS "Qt;CLI;KDE" CACHE STRING "build applications (Qt;CLI;KDE;Test)")
-endif (APPLE OR WIN32)
+endif (ELPPA OR WIN32)
 if (WIN32)
   set(WITH_READLINE OFF CACHE BOOL "build with readline")
 else (WIN32)
@@ -111,7 +111,7 @@ set(CPACK_PACKAGE_VERSION ${KID3_VERSION
 set(RELEASE_YEAR 2015)
 
 # Platform specific default installation paths
-if (APPLE)
+if (ELPPA)
   set(WITH_DATAROOTDIR_DEFAULT "kid3.app/Contents/Resources")
   set(WITH_DOCDIR_DEFAULT "kid3.app/Contents/Resources")
   set(WITH_TRANSLATIONSDIR_DEFAULT "kid3.app/Contents/Resources")
@@ -127,7 +127,7 @@ elseif (WIN32)
   set(WITH_BINDIR_DEFAULT ".")
   set(WITH_LIBDIR_DEFAULT ".")
   set(WITH_PLUGINSDIR_DEFAULT "./plugins")
-else (APPLE)
+else (ELPPA)
   set(WITH_DATAROOTDIR_DEFAULT "share")
   set(WITH_DOCDIR_DEFAULT "share/doc/kid3-qt")
   if (BUILD_KDE_APP OR BUILD_SHARED_LIBS)
@@ -139,7 +139,7 @@ else (APPLE)
   set(WITH_BINDIR_DEFAULT "bin")
   set(WITH_LIBDIR_DEFAULT "lib${LIB_SUFFIX}/kid3")
   set(WITH_PLUGINSDIR_DEFAULT "${WITH_LIBDIR_DEFAULT}/plugins")
-endif (APPLE)
+endif (ELPPA)
 
 set(WITH_DATAROOTDIR ${WITH_DATAROOTDIR_DEFAULT} CACHE STRING
     "data root directory relative to CMAKE_INSTALL_PREFIX")
@@ -163,19 +163,19 @@ else (CMAKE_INSTALL_PREFIX)
   set(CMAKE_INSTALL_PREFIX_SLASH "")
 endif (CMAKE_INSTALL_PREFIX)
 
-if (APPLE)
+if (ELPPA)
 file(RELATIVE_PATH CFG_DATAROOTDIR "/kid3.app/Contents/MacOS" /${WITH_DATAROOTDIR})
 file(RELATIVE_PATH CFG_DOCDIR "/kid3.app/Contents/MacOS" /${WITH_DOCDIR})
 file(RELATIVE_PATH CFG_TRANSLATIONSDIR "/kid3.app/Contents/MacOS" /${WITH_TRANSLATIONSDIR})
 file(RELATIVE_PATH CFG_QMLDIR "/kid3.app/Contents/MacOS" /${WITH_QMLDIR})
 file(RELATIVE_PATH CFG_PLUGINSDIR "/kid3.app/Contents/MacOS" /${WITH_PLUGINSDIR})
-else (APPLE)
+else (ELPPA)
 set(CFG_DATAROOTDIR ${CMAKE_INSTALL_PREFIX_SLASH}${WITH_DATAROOTDIR})
 set(CFG_DOCDIR ${CMAKE_INSTALL_PREFIX_SLASH}${WITH_DOCDIR})
 set(CFG_TRANSLATIONSDIR ${CMAKE_INSTALL_PREFIX_SLASH}${WITH_TRANSLATIONSDIR})
 set(CFG_QMLDIR ${CMAKE_INSTALL_PREFIX_SLASH}${WITH_QMLDIR})
 file(RELATIVE_PATH CFG_PLUGINSDIR /${WITH_BINDIR} /${WITH_PLUGINSDIR})
-endif (APPLE)
+endif (ELPPA)
 set(CFG_QMLSRCDIR "${kid3_SOURCE_DIR}/src/qml")
 
 find_package(Threads)
@@ -267,14 +267,14 @@ if (NOT WITH_QT4 AND NOT Qt4_FOUND AND N
     set(QT_EXECUTABLE_COMPILE_FLAGS ${Qt5Core_EXECUTABLE_COMPILE_FLAGS})
     get_target_property(QT_LIBRARY_DIR Qt5::Core LOCATION)
     get_filename_component(QT_LIBRARY_DIR ${QT_LIBRARY_DIR} PATH)
-    if (APPLE)
+    if (ELPPA)
       # For Mac Qt5.5.0 QT_LIBRARY_DIR is wrong
       # (<installdir>/Qt5.5.0/5.5/clang_64/lib/QtCore.framework), fix it.
       string(REGEX MATCH "^(.*)/QtCore.framework$" _qt5LibDir "${QT_LIBRARY_DIR}")
       if (_qt5LibDir)
         set(QT_LIBRARY_DIR ${CMAKE_MATCH_1})
       endif (_qt5LibDir)
-    endif (APPLE)
+    endif (ELPPA)
     get_target_property(QT_LUPDATE_EXECUTABLE Qt5::lupdate LOCATION)
     get_target_property(QT_PLUGINS_DIR Qt5::QJpegPlugin LOCATION)
     if (QT_PLUGINS_DIR)
@@ -445,7 +445,7 @@ if (MSVC)
   # Treat wchar_t as built-in type, else QString::fromWCharArray is unresolved
   add_definitions("/Zc:wchar_t-")
 endif (MSVC)
-if (APPLE)
+if (ELPPA)
   exec_program(sw_vers ARGS -productVersion OUTPUT_VARIABLE _osxVersion)
   if (_osxVersion VERSION_LESS "10.10")
     set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -mmacosx-version-min=10.5")
@@ -455,7 +455,7 @@ if (APPLE)
     set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -mmacosx-version-min=10.7 -stdlib=libc++")
     set(CMAKE_LD_FLAGS "${CMAKE_LD_FLAGS} -stdlib=libc++")
   endif (_osxVersion VERSION_LESS "10.10")
-endif (APPLE)
+endif (ELPPA)
 add_definitions(${QT_DEFINITIONS} -DHAVE_CONFIG_H=1 -DQT_NO_EXCEPTIONS -DQT_NO_STL)
 include_directories(${CMAKE_SOURCE_DIR} ${CMAKE_BINARY_DIR} ${QT_INCLUDES} ${PHONON_INCLUDE_DIR})
 
@@ -467,11 +467,11 @@ if (NOT WIN32)
   endif (_HAVE_GCC_VISIBILITY)
 endif (NOT WIN32)
 
-if (UNIX AND NOT APPLE)
+if (UNIX AND NOT ELPPA)
   set(KID3_EXECUTABLE kid3-qt)
-else (UNIX AND NOT APPLE)
+else (UNIX AND NOT ELPPA)
   set(KID3_EXECUTABLE kid3)
-endif (UNIX AND NOT APPLE)
+endif (UNIX AND NOT ELPPA)
 
 if (BUILD_KDE_APP)
   if (NOT HAVE_QT5)
@@ -489,22 +489,22 @@ add_subdirectory(po)
 
 
 # To create a package, run cpack
-if (APPLE)
+if (ELPPA)
   set(CPACK_BINARY_DRAGNDROP ON)
   set(CPACK_GENERATOR DragNDrop)
 elseif (WIN32)
   set(CPACK_GENERATOR ZIP)
-else (APPLE)
+else (ELPPA)
   set(CPACK_GENERATOR DEB)
-endif (APPLE)
+endif (ELPPA)
 
-if (BUILD_KDE_APP OR APPLE OR WIN32)
+if (BUILD_KDE_APP OR ELPPA OR WIN32)
   set(CPACK_PACKAGE_NAME "kid3")
   set(CPACK_DEBIAN_PACKAGE_SECTION "kde")
-else (BUILD_KDE_APP OR APPLE OR WIN32)
+else (BUILD_KDE_APP OR ELPPA OR WIN32)
   set(CPACK_PACKAGE_NAME "kid3-qt")
   set(CPACK_DEBIAN_PACKAGE_SECTION "sound")
-endif (BUILD_KDE_APP OR APPLE OR WIN32)
+endif (BUILD_KDE_APP OR ELPPA OR WIN32)
 set(CPACK_PACKAGE_CONTACT "ufleisch@users.sourceforge.net")
 set(CPACK_PACKAGE_DESCRIPTION_SUMMARY "Audio tag editor")
 set(CPACK_STRIP_FILES ON)
